<html>
  <script src="tyan.js"></script>
  <body>
    <table cellpadding="0" cellspacing="0" id="table"></table>
    <div>
      <button onclick="start()">Старт</button>
      <button onclick="start(true)">Заново</button>
      <input id="frame" value="0" type="range" min="0" step="1" onchange="setFrame(this.value)">
    </div>
    <script>
      let table = document.getElementById('table')
      let frame = document.getElementById('frame')
      let index = 0
      let tick = null

      const HEIGHT = 360
      const WIDTH = 480

      let tds = null
      function init() {
        table.innerHTML = ''
        for (let h = 0; h < HEIGHT; h++) {
          let tr = document.createElement('tr')
          for (let w = 0; w < WIDTH; w++) {
            let td = document.createElement('td')
            td.setAttribute('width', '1')
            td.setAttribute('height', '1')
            td.setAttribute('bgcolor', arr[0][h][w])

            tr.appendChild(td)
          }
          table.appendChild(tr)
        }

        tds = document.querySelectorAll('td')
        document.getElementById("frame").setAttribute('max', arr.length)
      }

      function start(start) {
        if (start) index = 0
        if (index === arr.length - 1) index = 0
        clearInterval(tick)
        tick = setInterval(function t() {
          if (index++ === arr.length) clearInterval(tick)
          drawImage()
        }, 0)
      }

      function drawImage() {
        for (let h = 0; h < HEIGHT; h++) {
          for (let w = 0; w < WIDTH; w++) {
            tds[h * WIDTH + w].setAttribute('bgcolor', arr[index][h][w])
          }
        }
        frame.setAttribute('value', index)
      }

      function setFrame(frame) {
        index = frame
        drawImage()
      }

      init()
    </script>
  </body>
</html>
